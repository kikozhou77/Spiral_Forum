<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>我要发帖 - 螺旋论坛</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">螺旋论坛</div>
      <div>用户: 小A | <a href="#">私信</a></div>
    </header>
    <nav>
      <a href="index.html">首页</a>
      <a href="my_follows.html">我的关注</a>
      <a href="my_profile.html">我的主页</a>
      <a href="messages.html">我的信息</a>
      <a href="post_detail.html" class="active">我要发帖!</a>
    </nav>

    <main>
      <section class="post-form">
        <h2>我要发帖</h2>
        <input type="text" id="post-title" placeholder="请输入帖子标题" class="form-input">
        <textarea id="post-content" rows="6" placeholder="请输入帖子内容" class="form-textarea"></textarea>
        <button id="submit-post" class="submit-post-button">发布帖子</button>
      </section>

      <section id="post-list">
        <h2>帖子列表</h2>
        <div id="posts-container"></div>
      </section>
    </main>
  </div>

  <script>
    // 获取已有帖子
    function loadPosts() {
      const posts = JSON.parse(localStorage.getItem('posts') || '[]');
      const container = document.getElementById('posts-container');
      container.innerHTML = '';
      posts.reverse().forEach(post => {
        const div = document.createElement('div');
        div.className = 'comment';
        div.innerHTML = `
          <div class="comment-author">${post.title}</div>
          <div class="comment-content">${post.content}</div>
        `;
        container.appendChild(div);
      });
    }

    // 添加新帖子
    document.getElementById('submit-post').addEventListener('click', () => {
      const title = document.getElementById('post-title').value.trim();
      const content = document.getElementById('post-content').value.trim();
      if (!title || !content) {
        alert('标题和内容不能为空');
        return;
      }
      const posts = JSON.parse(localStorage.getItem('posts') || '[]');
      posts.push({ title, content });
      localStorage.setItem('posts', JSON.stringify(posts));
      document.getElementById('post-title').value = '';
      document.getElementById('post-content').value = '';
      loadPosts();
    });

    window.onload = loadPosts;
  </script>
</body>
</html>
